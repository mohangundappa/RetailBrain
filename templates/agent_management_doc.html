{% extends "base.html" %}

{% block title %}Agent Management Documentation{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h2 class="mb-0">Staples Brain Agent Management</h2>
        </div>
        <div class="card-body">
          <p class="lead">
            The Agent Management interface allows you to create, modify, and delete custom agents for the Staples Brain system.
          </p>
          
          <div class="alert alert-info">
            <i class="bi bi-info-circle-fill"></i> Agents are specialized AI components that can handle specific customer service tasks such as order tracking, password resets, or product information lookup.
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row mt-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h3 class="mb-0">Managing Existing Agents</h3>
        </div>
        <div class="card-body">
          <p>
            The Agent Builder now includes a management panel that displays all existing agents in a table. This feature allows you to:
          </p>
          
          <h4>Viewing Agents</h4>
          <p>
            All existing agents are displayed in a table with the following information:
          </p>
          <ul>
            <li><strong>Name</strong>: The name of the agent</li>
            <li><strong>Description</strong>: A brief description of the agent's purpose</li>
            <li><strong>Components</strong>: The number of components in the agent's workflow</li>
            <li><strong>Last Updated</strong>: When the agent was last modified</li>
          </ul>
          
          <h4>Agent Types</h4>
          <p>
            The Staples Brain system includes two types of agents:
          </p>
          
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card h-100">
                <div class="card-header bg-primary text-white">
                  <h5 class="mb-0">Built-in Specialized Agents</h5>
                </div>
                <div class="card-body">
                  <p>
                    These agents are defined directly in the system code and cannot be edited through the UI. They include:
                  </p>
                  <ul>
                    <li><strong>Package Tracking Agent</strong>: Tracks shipments and provides delivery updates</li>
                    <li><strong>Reset Password Agent</strong>: Handles account password reset requests</li>
                    <li><strong>Store Locator Agent</strong>: Finds nearby Staples stores based on location</li>
                    <li><strong>Product Information Agent</strong>: Provides details about Staples products</li>
                  </ul>
                  <p>
                    Built-in agents appear with a <span class="badge bg-secondary">Built-in</span> label and can only be viewed, not edited.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card h-100">
                <div class="card-header bg-success text-white">
                  <h5 class="mb-0">Custom Agents</h5>
                </div>
                <div class="card-body">
                  <p>
                    These agents are created through the Agent Builder interface and stored in the database. They can be:
                  </p>
                  <ul>
                    <li>Created from scratch with custom components</li>
                    <li>Based on templates from the Template Gallery</li>
                    <li>Fully customized with unique logic and workflows</li>
                  </ul>
                  <p>
                    Custom agents can be edited, tested, and deleted through the Agent Builder interface.
                  </p>
                </div>
              </div>
            </div>
          </div>
          
          <h4>Editing Custom Agents</h4>
          <ol>
            <li>Click the <button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i> Edit</button> button next to the agent you want to modify</li>
            <li>This will load the agent into the Agent Builder canvas</li>
            <li>Make your changes to the agent's components, connections, or configuration</li>
            <li>Click "Save Agent" to preserve your changes</li>
          </ol>
          
          <h4>Deleting Agents</h4>
          <ol>
            <li>Click the <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i> Delete</button> button next to the agent you want to remove</li>
            <li>A confirmation dialog will appear</li>
            <li>Click "Delete Agent" to permanently remove the agent</li>
          </ol>
          
          <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle-fill"></i> <strong>Warning:</strong> Deleting an agent cannot be undone. All components, connections, and configuration data will be permanently removed.
          </div>
          
          <h4>Creating New Agents</h4>
          <ol>
            <li>Click the <button class="btn btn-primary"><i class="bi bi-plus-circle"></i> Create New Agent</button> button at the bottom of the agents table</li>
            <li>This will clear the canvas and allow you to start building a new agent</li>
            <li>Follow the standard agent creation process using the drag-and-drop interface</li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row mt-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h3 class="mb-0">Best Practices for Agent Management</h3>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <h5><i class="bi bi-lightbulb"></i> Naming Convention</h5>
              <ul>
                <li>Use descriptive, specific names for agents (e.g., "Order Tracking Agent", "Password Reset Assistant")</li>
                <li>Avoid generic names like "Test" or "New Agent"</li>
                <li>Include the agent's primary function in its name</li>
              </ul>
            </div>
            <div class="col-md-6">
              <h5><i class="bi bi-save"></i> Regular Saving</h5>
              <ul>
                <li>Save your work frequently when making changes</li>
                <li>Create a backup by using "Save As Template" for complex agents</li>
                <li>Test changes before deploying to production</li>
              </ul>
            </div>
          </div>
          
          <div class="row mt-3">
            <div class="col-md-6">
              <h5><i class="bi bi-diagram-3"></i> Component Organization</h5>
              <ul>
                <li>Arrange components in a logical top-to-bottom flow</li>
                <li>Group related functionality together</li>
                <li>Use clear connection labels to indicate data flow</li>
              </ul>
            </div>
            <div class="col-md-6">
              <h5><i class="bi bi-file-text"></i> Documentation</h5>
              <ul>
                <li>Add detailed descriptions to your agents</li>
                <li>Document the expected inputs and outputs</li>
                <li>Note any dependencies or integration points</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row mt-4 mb-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h3 class="mb-0">Troubleshooting</h3>
        </div>
        <div class="card-body">
          <div class="accordion" id="troubleshootingAccordion">
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                  Agent doesn't appear in the management table
                </button>
              </h2>
              <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#troubleshootingAccordion">
                <div class="accordion-body">
                  <ul>
                    <li>Refresh the page to update the agent list</li>
                    <li>Check if the agent was successfully saved (look for success messages)</li>
                    <li>Verify database connectivity if no agents are visible</li>
                  </ul>
                </div>
              </div>
            </div>
            
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  Cannot delete an agent
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#troubleshootingAccordion">
                <div class="accordion-body">
                  <ul>
                    <li>Check if the agent is currently in use by any active conversations</li>
                    <li>Verify your user permissions for agent deletion</li>
                    <li>Try refreshing the page and attempting again</li>
                    <li>Check the browser console for error messages</li>
                  </ul>
                </div>
              </div>
            </div>
            
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  Changes not saved when editing an agent
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#troubleshootingAccordion">
                <div class="accordion-body">
                  <ul>
                    <li>Ensure you clicked "Save Agent" after making changes</li>
                    <li>Check for validation errors in the agent configuration</li>
                    <li>Verify all required fields are completed (agent name, component configurations)</li>
                    <li>Look for error messages in the browser console</li>
                  </ul>
                </div>
              </div>
            </div>
            
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingFour">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                  Cannot edit a built-in agent
                </button>
              </h2>
              <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#troubleshootingAccordion">
                <div class="accordion-body">
                  <p>Built-in agents (marked with a <span class="badge bg-secondary">Built-in</span> label) cannot be edited through the Agent Builder interface because they are defined directly in the system code.</p>
                  <ul>
                    <li>If you need similar functionality to a built-in agent, create a new custom agent with the required components</li>
                    <li>For changes to built-in agents, contact the development team</li>
                    <li>You can view details about built-in agents by clicking the <button class="btn btn-sm btn-outline-secondary"><i class="bi bi-eye"></i> View</button> button</li>
                    <li>Custom agents that you create will always be editable</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}