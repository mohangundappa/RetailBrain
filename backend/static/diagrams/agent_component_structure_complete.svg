<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="680" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="680" fill="#222222" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">Agent Component Structure</text>
  
  <!-- Core Container -->
  <rect x="100" y="80" width="600" height="560" fill="#333333" rx="8" ry="8" stroke="#555555" stroke-width="2"/>
  
  <!-- LLM Component - NEW ADDITION -->
  <rect x="220" y="100" width="360" height="80" fill="#6c3483" rx="5" ry="5" stroke="#9b59b6" stroke-width="2"/>
  <text x="400" y="130" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Language Model (LLM)</text>
  <text x="400" y="160" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">GPT-4o Foundation Model</text>

  <!-- Central Agent Logic -->
  <rect x="220" y="210" width="360" height="80" fill="#1a5276" rx="5" ry="5" stroke="#3498db" stroke-width="2"/>
  <text x="400" y="240" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Agent Core Logic</text>
  <text x="400" y="270" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Core reasoning and decision making system</text>
  
  <!-- Memory Component -->
  <rect x="120" y="320" width="200" height="80" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="220" y="350" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Memory System</text>
  <text x="220" y="375" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Conversation history</text>
  
  <!-- Prompt Templates -->
  <rect x="480" y="320" width="200" height="80" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="580" y="350" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Prompt Templates</text>
  <text x="580" y="375" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Context formulation</text>
  
  <!-- Entity Extraction -->
  <rect x="120" y="430" width="200" height="80" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="220" y="460" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Entity Framework</text>
  <text x="220" y="485" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Data extraction &amp; validation</text>
  
  <!-- Tools Section -->
  <rect x="480" y="430" width="200" height="140" fill="#2c3e50" rx="5" ry="5" stroke="#e74c3c" stroke-width="2"/>
  <text x="580" y="455" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Tools</text>
  
  <!-- Individual Tools -->
  <rect x="495" y="470" width="170" height="30" fill="#34495e" rx="3" ry="3" stroke="#e74c3c" stroke-width="1"/>
  <text x="580" y="490" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">External API Tool</text>
  
  <rect x="495" y="510" width="170" height="30" fill="#34495e" rx="3" ry="3" stroke="#e74c3c" stroke-width="1"/>
  <text x="580" y="530" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Database Query Tool</text>
  
  <!-- Response Formatter -->
  <rect x="120" y="540" width="200" height="80" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="220" y="570" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Response Formatter</text>
  <text x="220" y="595" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Output structuring</text>
  
  <!-- Connections -->
  <!-- LLM to Core -->
  <path d="M 400 180 L 400 210" stroke="#9b59b6" stroke-width="2" fill="none"/>
  
  <!-- Core to Memory -->
  <path d="M 400 290 L 400 310 L 220 310 L 220 320" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Core to Prompt Templates -->
  <path d="M 400 290 L 400 310 L 580 310 L 580 320" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Memory to Entity -->
  <path d="M 220 400 L 220 430" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Prompts to Tools -->
  <path d="M 580 400 L 580 430" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Entity to Response -->
  <path d="M 220 510 L 220 540" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Tools to Response (diagonal) -->
  <path d="M 520 570 L 320 570" stroke="#e74c3c" stroke-width="2" fill="none"/>
  
  <!-- Tool to LLM (feedback loop) -->
  <path d="M 650 490 L 680 490 L 680 140 L 580 140" stroke="#e74c3c" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  
  <!-- Response to LLM (feedback loop) -->
  <path d="M 150 580 L 120 580 L 120 140 L 220 140" stroke="#5dade2" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  
  <!-- Legend -->
  <rect x="610" y="600" width="20" height="10" fill="#9b59b6" rx="2" ry="2"/>
  <text x="635" y="610" font-family="Arial" font-size="12" fill="#ffffff">LLM Component</text>
  
  <rect x="610" y="620" width="20" height="10" fill="#3498db" rx="2" ry="2"/>
  <text x="635" y="630" font-family="Arial" font-size="12" fill="#ffffff">Core Components</text>
  
  <rect x="610" y="640" width="20" height="10" fill="#e74c3c" rx="2" ry="2"/>
  <text x="635" y="650" font-family="Arial" font-size="12" fill="#ffffff">Tool Interface</text>
  
  <rect x="610" y="660" width="20" height="10" fill="#5dade2" rx="2" ry="2" stroke-dasharray="5,5" stroke="#5dade2"/>
  <text x="635" y="670" font-family="Arial" font-size="12" fill="#ffffff">Feedback Loops</text>
</svg>