<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#222222" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">Agent Component Structure</text>
  
  <!-- Agent Box -->
  <rect x="150" y="80" width="500" height="500" fill="#343a40" rx="5" ry="5" stroke="#ffffff" stroke-width="1"/>
  <text x="400" y="110" font-family="Arial" font-size="20" fill="#ffffff" text-anchor="middle" font-weight="bold">Custom Agent</text>
  
  <!-- Components Section -->
  <rect x="180" y="130" width="440" height="220" fill="#2d2d2d" rx="5" ry="5" stroke="#fd7e14" stroke-width="1"/>
  <text x="400" y="150" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Components</text>
  
  <!-- Input Component -->
  <rect x="200" y="170" width="120" height="60" fill="#007bff" rx="5" ry="5" stroke="#ffffff" stroke-width="1"/>
  <text x="260" y="195" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Input Prompt</text>
  <text x="260" y="215" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">component_type: prompt</text>
  
  <!-- Processing Component -->
  <rect x="360" y="170" width="120" height="60" fill="#20c997" rx="5" ry="5" stroke="#ffffff" stroke-width="1"/>
  <text x="420" y="195" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">LLM</text>
  <text x="420" y="215" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">component_type: llm</text>
  
  <!-- Output Component -->
  <rect x="480" y="250" width="120" height="60" fill="#dc3545" rx="5" ry="5" stroke="#ffffff" stroke-width="1"/>
  <text x="540" y="275" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Output Parser</text>
  <text x="540" y="295" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">component_type: output</text>
  
  <!-- Entity Extraction Component -->
  <rect x="200" y="250" width="120" height="60" fill="#ffc107" rx="5" ry="5" stroke="#ffffff" stroke-width="1"/>
  <text x="260" y="275" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Entity Extractor</text>
  <text x="260" y="295" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">component_type: parser</text>
  
  <!-- Connections Section -->
  <rect x="180" y="370" width="440" height="80" fill="#2d2d2d" rx="5" ry="5" stroke="#fd7e14" stroke-width="1"/>
  <text x="400" y="390" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Connections</text>
  
  <!-- Connection examples -->
  <text x="200" y="415" font-family="Arial" font-size="12" fill="#ffffff">• Input → Entity Extractor</text>
  <text x="200" y="435" font-family="Arial" font-size="12" fill="#ffffff">• Entity Extractor → LLM</text>
  <text x="400" y="415" font-family="Arial" font-size="12" fill="#ffffff">• LLM → Output Parser</text>
  <text x="400" y="435" font-family="Arial" font-size="12" fill="#ffffff">• Input → LLM</text>
  
  <!-- Configuration Section -->
  <rect x="180" y="470" width="440" height="90" fill="#2d2d2d" rx="5" ry="5" stroke="#fd7e14" stroke-width="1"/>
  <text x="400" y="490" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Configuration JSON</text>
  
  <!-- JSON example -->
  <text x="400" y="515" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">{ "components": [...], "connections": [...], ... }</text>
  <text x="400" y="535" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">Stores all agent metadata, components, and connections</text>
  
  <!-- Component Connections - Arrows -->
  <path d="M320,200 L360,200" stroke="#ffffff" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M260,230 L260,250" stroke="#ffffff" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M320,280 L360,230" stroke="#ffffff" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M480,280 L480,230" stroke="#ffffff" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff"/>
    </marker>
  </defs>
  
  <!-- Fixed issue highlight -->
  <rect x="400" y="550" width="220" height="30" fill="#dc3545" rx="5" ry="5" opacity="0.8"/>
  <text x="510" y="570" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle" font-weight="bold">Fixed: Wizard ↔ Builder Compatibility ✓</text>
</svg>