<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#222222" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">Agent Builder System Architecture</text>
  
  <!-- Two Main Approaches Box -->
  <rect x="50" y="70" width="700" height="220" fill="#2d2d2d" rx="5" ry="5" stroke="#6c757d" stroke-width="2"/>
  <text x="400" y="90" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Creation Approaches</text>
  
  <!-- Wizard Approach -->
  <rect x="70" y="110" width="320" height="160" fill="#343a40" rx="5" ry="5" stroke="#007bff" stroke-width="2"/>
  <text x="230" y="130" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle" font-weight="bold">Step-by-Step Wizard</text>
  
  <!-- Wizard Steps -->
  <rect x="80" y="140" width="300" height="120" fill="#343a40" rx="5" ry="5"/>
  <text x="90" y="160" font-family="Arial" font-size="12" fill="#ffffff">Step 1: Basic Information</text>
  <text x="90" y="180" font-family="Arial" font-size="12" fill="#ffffff">Step 2: Entity Definitions</text>
  <text x="90" y="200" font-family="Arial" font-size="12" fill="#ffffff">Step 3: Prompt Templates</text>
  <text x="90" y="220" font-family="Arial" font-size="12" fill="#ffffff">Step 4: Response Formats</text>
  <text x="90" y="240" font-family="Arial" font-size="12" fill="#ffffff">Step 5: Review & Activate</text>
  
  <!-- Drag and Drop Approach -->
  <rect x="410" y="110" width="320" height="160" fill="#343a40" rx="5" ry="5" stroke="#20c997" stroke-width="2"/>
  <text x="570" y="130" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle" font-weight="bold">Visual Drag-and-Drop Builder</text>
  
  <!-- Drag and Drop Components -->
  <rect x="420" y="140" width="300" height="120" fill="#343a40" rx="5" ry="5"/>
  <text x="430" y="160" font-family="Arial" font-size="12" fill="#ffffff">Component Palette</text>
  <text x="430" y="180" font-family="Arial" font-size="12" fill="#ffffff">Interactive Canvas</text>
  <text x="430" y="200" font-family="Arial" font-size="12" fill="#ffffff">Connection Management (jsPlumb)</text>
  <text x="430" y="220" font-family="Arial" font-size="12" fill="#ffffff">Properties Panel</text>
  <text x="430" y="240" font-family="Arial" font-size="12" fill="#ffffff">Testing Interface</text>
  
  <!-- Compatibility Layer -->
  <rect x="50" y="310" width="700" height="100" fill="#2d2d2d" rx="5" ry="5" stroke="#fd7e14" stroke-width="2"/>
  <text x="400" y="330" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Compatibility Layer</text>
  
  <!-- Compatibility Components -->
  <rect x="70" y="340" width="320" height="60" fill="#343a40" rx="5" ry="5"/>
  <text x="80" y="360" font-family="Arial" font-size="12" fill="#ffffff">Unified Data Structure</text>
  <text x="80" y="380" font-family="Arial" font-size="12" fill="#ffffff">Configuration Adapters</text>
  
  <rect x="410" y="340" width="320" height="60" fill="#343a40" rx="5" ry="5"/>
  <text x="420" y="360" font-family="Arial" font-size="12" fill="#ffffff">Component Generation</text>
  <text x="420" y="380" font-family="Arial" font-size="12" fill="#ffffff">Fallback Relationship Handling</text>
  
  <!-- Database Layer -->
  <rect x="50" y="430" width="700" height="140" fill="#2d2d2d" rx="5" ry="5" stroke="#6c757d" stroke-width="2"/>
  <text x="400" y="450" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Database Model</text>
  
  <!-- Database Tables -->
  <rect x="70" y="470" width="150" height="80" fill="#343a40" rx="5" ry="5" stroke="#6c757d" stroke-width="1"/>
  <text x="145" y="490" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">CustomAgent</text>
  <line x1="70" y1="500" x2="220" y2="500" stroke="#6c757d" stroke-width="1"/>
  <text x="145" y="520" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">Configuration JSON</text>
  <text x="145" y="535" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">Metadata & Settings</text>
  
  <rect x="240" y="470" width="150" height="80" fill="#343a40" rx="5" ry="5" stroke="#6c757d" stroke-width="1"/>
  <text x="315" y="490" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">AgentComponent</text>
  <line x1="240" y1="500" x2="390" y2="500" stroke="#6c757d" stroke-width="1"/>
  <text x="315" y="520" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">Component Type</text>
  <text x="315" y="535" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">Position & Config</text>
  
  <rect x="410" y="470" width="150" height="80" fill="#343a40" rx="5" ry="5" stroke="#6c757d" stroke-width="1"/>
  <text x="485" y="490" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">ComponentConnection</text>
  <line x1="410" y1="500" x2="560" y2="500" stroke="#6c757d" stroke-width="1"/>
  <text x="485" y="520" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">Source & Target</text>
  <text x="485" y="535" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">Connection Type</text>
  
  <rect x="580" y="470" width="150" height="80" fill="#343a40" rx="5" ry="5" stroke="#6c757d" stroke-width="1"/>
  <text x="655" y="490" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">AgentTemplate</text>
  <line x1="580" y1="500" x2="730" y2="500" stroke="#6c757d" stroke-width="1"/>
  <text x="655" y="520" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">Template Configuration</text>
  <text x="655" y="535" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">Reusable Components</text>
  
  <!-- Arrows between layers -->
  <!-- From Wizard to Compatibility -->
  <path d="M230,270 L230,310" stroke="#007bff" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- From Drag and Drop to Compatibility -->
  <path d="M570,270 L570,310" stroke="#20c997" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- From Compatibility to Database -->
  <path d="M400,410 L400,430" stroke="#fd7e14" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff"/>
    </marker>
  </defs>
  
  <!-- Fixed issue box - highlight what we fixed -->
  <rect x="50" y="10" width="220" height="40" fill="#dc3545" rx="5" ry="5" opacity="0.8"/>
  <text x="160" y="35" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle" font-weight="bold">Fixed Compatibility Issue âœ“</text>
</svg>