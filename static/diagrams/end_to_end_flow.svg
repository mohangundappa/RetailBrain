<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="700" fill="#222222" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">End-to-End Flow: From User Input to Response</text>
  
  <!-- System Boundary -->
  <rect x="50" y="70" width="800" height="600" fill="#333333" rx="8" ry="8" stroke="#555555" stroke-width="2"/>
  
  <!-- User Input Section -->
  <rect x="70" y="90" width="200" height="80" fill="#3498db" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="170" y="125" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">User Input</text>
  <text x="170" y="150" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Multiple channels</text>
  
  <!-- Frontend Integration -->
  <rect x="350" y="90" width="200" height="80" fill="#3498db" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="450" y="125" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Frontend Integration</text>
  <text x="450" y="150" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Kore.ai, Slack, Web</text>
  
  <!-- API Gateway -->
  <rect x="630" y="90" width="200" height="80" fill="#3498db" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="730" y="125" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">API Gateway</text>
  <text x="730" y="150" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Request handling</text>
  
  <!-- Brain Orchestrator -->
  <rect x="350" y="200" width="200" height="80" fill="#8e44ad" rx="5" ry="5" stroke="#a569bd" stroke-width="2"/>
  <text x="450" y="235" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Brain Orchestrator</text>
  <text x="450" y="260" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Intent detection, routing</text>
  
  <!-- Security & Compliance -->
  <rect x="70" y="200" width="200" height="80" fill="#7d3c98" rx="5" ry="5" stroke="#d2b4de" stroke-width="2"/>
  <text x="170" y="235" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Security Layer</text>
  <text x="170" y="260" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Authentication, validation</text>
  
  <!-- Telemetry System -->
  <rect x="630" y="200" width="200" height="80" fill="#7d3c98" rx="5" ry="5" stroke="#d2b4de" stroke-width="2"/>
  <text x="730" y="235" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Telemetry System</text>
  <text x="730" y="260" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Logging, metrics, tracing</text>
  
  <!-- Agent Selection -->
  <rect x="350" y="310" width="200" height="80" fill="#2980b9" rx="5" ry="5" stroke="#3498db" stroke-width="2"/>
  <text x="450" y="345" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Agent Selection</text>
  <text x="450" y="370" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Dynamic agent assignment</text>
  
  <!-- LLM Foundation -->
  <rect x="150" y="420" width="200" height="80" fill="#6c3483" rx="5" ry="5" stroke="#9b59b6" stroke-width="2"/>
  <text x="250" y="455" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">LLM Foundation</text>
  <text x="250" y="480" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">GPT-4o, reasoning</text>
  
  <!-- Database System -->
  <rect x="550" y="420" width="200" height="80" fill="#16a085" rx="5" ry="5" stroke="#27ae60" stroke-width="2"/>
  <text x="650" y="455" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Database System</text>
  <text x="650" y="480" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">State, history, templates</text>
  
  <!-- Specialized Agent -->
  <rect x="350" y="420" width="200" height="80" fill="#2980b9" rx="5" ry="5" stroke="#3498db" stroke-width="2"/>
  <text x="450" y="455" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Specialized Agent</text>
  <text x="450" y="480" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Agent-specific processing</text>
  
  <!-- External APIs & Tools -->
  <rect x="350" y="530" width="200" height="80" fill="#e74c3c" rx="5" ry="5" stroke="#f1c40f" stroke-width="2"/>
  <text x="450" y="565" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">External APIs</text>
  <text x="450" y="590" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Salesforce, order systems</text>
  
  <!-- Response Generation -->
  <rect x="70" y="530" width="200" height="80" fill="#2980b9" rx="5" ry="5" stroke="#3498db" stroke-width="2"/>
  <text x="170" y="565" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Response Generation</text>
  <text x="170" y="590" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Formatting, personalization</text>
  
  <!-- Caching System -->
  <rect x="630" y="530" width="200" height="80" fill="#16a085" rx="5" ry="5" stroke="#27ae60" stroke-width="2"/>
  <text x="730" y="565" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Caching System</text>
  <text x="730" y="590" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Response optimization</text>
  
  <!-- Connections -->
  <!-- User Input to Frontend -->
  <path d="M 270 130 L 350 130" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Frontend to API Gateway -->
  <path d="M 550 130 L 630 130" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- API Gateway to Brain Orchestrator -->
  <path d="M 730 170 L 730 190 L 450 190 L 450 200" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- API Gateway to Security Layer -->
  <path d="M 630 130 L 600 130 L 600 170 L 170 170 L 170 200" stroke="#d2b4de" stroke-width="2" fill="none"/>
  
  <!-- API Gateway to Telemetry -->
  <path d="M 730 170 L 730 200" stroke="#d2b4de" stroke-width="2" fill="none"/>
  
  <!-- Security to Brain Orchestrator -->
  <path d="M 270 240 L 350 240" stroke="#d2b4de" stroke-width="2" fill="none"/>
  
  <!-- Brain Orchestrator to Telemetry -->
  <path d="M 550 240 L 630 240" stroke="#a569bd" stroke-width="2" fill="none"/>
  
  <!-- Brain Orchestrator to Agent Selection -->
  <path d="M 450 280 L 450 310" stroke="#a569bd" stroke-width="2" fill="none"/>
  
  <!-- Agent Selection to Specialized Agent -->
  <path d="M 450 390 L 450 420" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Agent Selection to LLM Foundation -->
  <path d="M 350 350 L 250 350 L 250 420" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Agent Selection to Database -->
  <path d="M 550 350 L 650 350 L 650 420" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- LLM to Specialized Agent -->
  <path d="M 350 460 L 250 460" stroke="#9b59b6" stroke-width="2" fill="none"/>
  
  <!-- Specialized Agent to Database -->
  <path d="M 550 460 L 650 460" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Specialized Agent to External APIs -->
  <path d="M 450 500 L 450 530" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- External APIs to Response -->
  <path d="M 350 570 L 270 570" stroke="#f1c40f" stroke-width="2" fill="none"/>
  
  <!-- External APIs to Caching -->
  <path d="M 550 570 L 630 570" stroke="#f1c40f" stroke-width="2" fill="none"/>
  
  <!-- Response back to User (loop) -->
  <path d="M 70 570 L 50 570 L 50 130 L 70 130" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Database to Caching -->
  <path d="M 650 500 L 650 520 L 730 520 L 730 530" stroke="#27ae60" stroke-width="2" fill="none"/>
  
  <!-- Caching to Response -->
  <path d="M 630 570 L 600 570 L 600 620 L 150 620 L 150 610" stroke="#27ae60" stroke-width="2" fill="none"/>
  
  <!-- LLM to Response -->
  <path d="M 250 500 L 250 520 L 170 520 L 170 530" stroke="#9b59b6" stroke-width="2" fill="none"/>
  
  <!-- Legend -->
  <rect x="60" y="660" width="20" height="10" fill="#3498db" rx="2" ry="2"/>
  <text x="85" y="670" font-family="Arial" font-size="12" fill="#ffffff">Interface Components</text>
  
  <rect x="240" y="660" width="20" height="10" fill="#8e44ad" rx="2" ry="2"/>
  <text x="265" y="670" font-family="Arial" font-size="12" fill="#ffffff">Orchestration</text>
  
  <rect x="380" y="660" width="20" height="10" fill="#7d3c98" rx="2" ry="2"/>
  <text x="405" y="670" font-family="Arial" font-size="12" fill="#ffffff">Security/Telemetry</text>
  
  <rect x="550" y="660" width="20" height="10" fill="#6c3483" rx="2" ry="2"/>
  <text x="575" y="670" font-family="Arial" font-size="12" fill="#ffffff">LLM Components</text>
  
  <rect x="700" y="660" width="20" height="10" fill="#16a085" rx="2" ry="2"/>
  <text x="725" y="670" font-family="Arial" font-size="12" fill="#ffffff">Data Storage</text>
  
  <rect x="240" y="680" width="20" height="10" fill="#e74c3c" rx="2" ry="2"/>
  <text x="265" y="690" font-family="Arial" font-size="12" fill="#ffffff">External Systems</text>
  
  <rect x="380" y="680" width="20" height="10" fill="#2980b9" rx="2" ry="2"/>
  <text x="405" y="690" font-family="Arial" font-size="12" fill="#ffffff">Agent Components</text>
</svg>