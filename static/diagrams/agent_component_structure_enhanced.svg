<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="780" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="780" fill="#222222" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">Agent Component Structure - Architectural View</text>
  
  <!-- System Boundary -->
  <rect x="60" y="70" width="780" height="670" fill="#333333" rx="8" ry="8" stroke="#555555" stroke-width="2"/>
  
  <!-- LangChain/LangGraph Integration Layer -->
  <rect x="90" y="85" width="720" height="30" fill="#555555" rx="5" ry="5" stroke="#ffffff" stroke-width="1" stroke-dasharray="5,3"/>
  <text x="450" y="105" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">LangChain/LangGraph Integration Layer</text>
  
  <!-- LLM Component -->
  <rect x="270" y="130" width="360" height="70" fill="#6c3483" rx="5" ry="5" stroke="#9b59b6" stroke-width="2"/>
  <text x="450" y="155" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Language Model (LLM)</text>
  <text x="450" y="180" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">GPT-4o Foundation Model</text>

  <!-- LLM Caching -->
  <rect x="680" y="130" width="130" height="70" fill="#6c3483" rx="5" ry="5" stroke="#9b59b6" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="745" y="155" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">LLM</text>
  <text x="745" y="175" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Response</text>
  <text x="745" y="195" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Cache</text>

  <!-- Orchestrator Connection to System -->
  <rect x="90" y="130" width="130" height="70" fill="#273746" rx="5" ry="5" stroke="#5dade2" stroke-width="1"/>
  <text x="155" y="165" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">System</text>
  <text x="155" y="185" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Orchestrator</text>

  <!-- Central Agent Logic -->
  <rect x="270" y="220" width="360" height="70" fill="#1a5276" rx="5" ry="5" stroke="#3498db" stroke-width="2"/>
  <text x="450" y="250" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle">Agent Core Logic</text>
  <text x="450" y="270" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Core reasoning and decision making system</text>
  
  <!-- Security & Guardrails System - NEW -->
  <rect x="90" y="310" width="200" height="70" fill="#7d3c98" rx="5" ry="5" stroke="#d2b4de" stroke-width="2"/>
  <text x="190" y="340" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Security & Guardrails</text>
  <text x="190" y="360" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Input/output verification</text>
  
  <!-- Memory Component -->
  <rect x="90" y="400" width="200" height="70" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="190" y="430" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Memory System</text>
  <text x="190" y="450" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Conversation history</text>
  
  <!-- Prompt Templates -->
  <rect x="350" y="310" width="200" height="70" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="450" y="340" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Prompt Templates</text>
  <text x="450" y="360" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Context formulation</text>
  
  <!-- Entity Extraction -->
  <rect x="90" y="490" width="200" height="70" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="190" y="520" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Entity Framework</text>
  <text x="190" y="540" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Data extraction & validation</text>
  
  <!-- Tool Orchestration - NEW -->
  <rect x="610" y="310" width="200" height="70" fill="#117a65" rx="5" ry="5" stroke="#27ae60" stroke-width="2"/>
  <text x="710" y="340" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Tool Orchestration</text>
  <text x="710" y="360" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Tool selection & execution</text>
  
  <!-- Tools Section -->
  <rect x="610" y="400" width="200" height="160" fill="#2c3e50" rx="5" ry="5" stroke="#e74c3c" stroke-width="2"/>
  <text x="710" y="425" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Tools</text>
  
  <!-- Individual Tools -->
  <rect x="625" y="440" width="170" height="30" fill="#34495e" rx="3" ry="3" stroke="#e74c3c" stroke-width="1"/>
  <text x="710" y="460" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">External API Tool</text>
  
  <rect x="625" y="480" width="170" height="30" fill="#34495e" rx="3" ry="3" stroke="#e74c3c" stroke-width="1"/>
  <text x="710" y="500" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Database Query Tool</text>

  <rect x="625" y="520" width="170" height="30" fill="#34495e" rx="3" ry="3" stroke="#e74c3c" stroke-width="1"/>
  <text x="710" y="540" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Documentation Access</text>
  
  <!-- Self-documentation - NEW -->
  <rect x="350" y="400" width="200" height="70" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="450" y="430" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Self-Documentation</text>
  <text x="450" y="450" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Capability tracking</text>
  
  <!-- Performance Optimization - NEW -->
  <rect x="350" y="490" width="200" height="70" fill="#3498db" rx="5" ry="5" stroke="#85c1e9" stroke-width="2"/>
  <text x="450" y="520" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Performance Optimization</text>
  <text x="450" y="540" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Parallelization & efficiency</text>
  
  <!-- Response Formatter -->
  <rect x="90" y="580" width="200" height="70" fill="#2e4053" rx="5" ry="5" stroke="#5dade2" stroke-width="2"/>
  <text x="190" y="610" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Response Formatter</text>
  <text x="190" y="630" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Output structuring</text>
  
  <!-- Output Filtering - NEW -->
  <rect x="350" y="580" width="200" height="70" fill="#7d3c98" rx="5" ry="5" stroke="#d2b4de" stroke-width="2"/>
  <text x="450" y="610" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle">Output Filtering</text>
  <text x="450" y="630" font-family="Arial" font-size="14" fill="#aaaaaa" text-anchor="middle">Content safety & compliance</text>
  
  <!-- Connections -->
  <!-- System Orchestrator to LLM -->
  <path d="M 220 165 L 270 165" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- LLM to Cache -->
  <path d="M 630 165 L 680 165" stroke="#9b59b6" stroke-width="2" fill="none" stroke-dasharray="5,3"/>
  
  <!-- LLM to Core -->
  <path d="M 450 200 L 450 220" stroke="#9b59b6" stroke-width="2" fill="none"/>
  
  <!-- Core to Security -->
  <path d="M 270 255 L 190 255 L 190 310" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Core to Prompt Templates -->
  <path d="M 450 290 L 450 310" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Core to Tool Orchestration -->
  <path d="M 630 255 L 710 255 L 710 310" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Security to Memory -->
  <path d="M 190 380 L 190 400" stroke="#d2b4de" stroke-width="2" fill="none"/>
  
  <!-- Memory to Entity -->
  <path d="M 190 470 L 190 490" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Security to Self-Documentation -->
  <path d="M 290 345 L 350 345" stroke="#d2b4de" stroke-width="2" fill="none"/>
  
  <!-- Prompt Templates to Self-Documentation -->
  <path d="M 450 380 L 450 400" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Self-Documentation to Performance Optimization -->
  <path d="M 450 470 L 450 490" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Tool Orchestration to Tools -->
  <path d="M 710 380 L 710 400" stroke="#27ae60" stroke-width="2" fill="none"/>
  
  <!-- Entity to Response -->
  <path d="M 190 560 L 190 580" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Performance Optimization to Output Filtering -->
  <path d="M 450 560 L 450 580" stroke="#3498db" stroke-width="2" fill="none"/>
  
  <!-- Tool to LLM (feedback loop) -->
  <path d="M 710 400 L 800 400 L 800 165 L 630 165" stroke="#e74c3c" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  
  <!-- Response to Output Filtering -->
  <path d="M 290 615 L 350 615" stroke="#5dade2" stroke-width="2" fill="none"/>
  
  <!-- Response to LLM (feedback loop) -->
  <path d="M 190 650 L 190 670 L 80 670 L 80 165 L 100 165" stroke="#5dade2" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  
  <!-- Tools to Performance Optimization -->
  <path d="M 610 520 L 550 520" stroke="#e74c3c" stroke-width="2" fill="none"/>
  
  <!-- Output Filtering to System Orchestrator (feedback) -->
  <path d="M 450 650 L 450 680 L 155 680 L 155 200" stroke="#d2b4de" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  
  <!-- Legend -->
  <rect x="100" y="710" width="20" height="10" fill="#555555" rx="2" ry="2" stroke="#ffffff" stroke-width="1" stroke-dasharray="5,3"/>
  <text x="125" y="720" font-family="Arial" font-size="12" fill="#ffffff">LangChain Integration</text>
  
  <rect x="280" y="710" width="20" height="10" fill="#9b59b6" rx="2" ry="2"/>
  <text x="305" y="720" font-family="Arial" font-size="12" fill="#ffffff">LLM Components</text>
  
  <rect x="460" y="710" width="20" height="10" fill="#3498db" rx="2" ry="2"/>
  <text x="485" y="720" font-family="Arial" font-size="12" fill="#ffffff">Core Components</text>
  
  <rect x="640" y="710" width="20" height="10" fill="#e74c3c" rx="2" ry="2"/>
  <text x="665" y="720" font-family="Arial" font-size="12" fill="#ffffff">Tool Interface</text>
  
  <rect x="100" y="740" width="20" height="10" fill="#d2b4de" rx="2" ry="2"/>
  <text x="125" y="750" font-family="Arial" font-size="12" fill="#ffffff">Security & Guardrails</text>
  
  <rect x="280" y="740" width="20" height="10" fill="#27ae60" rx="2" ry="2"/>
  <text x="305" y="750" font-family="Arial" font-size="12" fill="#ffffff">Tool Orchestration</text>
  
  <rect x="460" y="740" width="20" height="10" fill="#5dade2" rx="2" ry="2" stroke-dasharray="5,5" stroke="#5dade2"/>
  <text x="485" y="750" font-family="Arial" font-size="12" fill="#ffffff">Feedback Loops</text>
  
  <rect x="640" y="740" width="20" height="10" fill="#85c1e9" rx="2" ry="2"/>
  <text x="665" y="750" font-family="Arial" font-size="12" fill="#ffffff">Performance Optimization</text>
</svg>