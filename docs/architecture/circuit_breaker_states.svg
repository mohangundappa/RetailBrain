<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="400" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect x="0" y="0" width="800" height="400" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">Circuit Breaker States</text>
  
  <!-- Closed State -->
  <circle cx="200" cy="180" r="80" fill="#28a745" opacity="0.8"/>
  <text x="200" y="180" font-family="Arial" font-size="20" text-anchor="middle" fill="white" font-weight="bold">CLOSED</text>
  <text x="200" y="210" font-family="Arial" font-size="14" text-anchor="middle" fill="white">Normal Operation</text>
  
  <!-- Open State -->
  <circle cx="600" cy="180" r="80" fill="#dc3545" opacity="0.8"/>
  <text x="600" y="180" font-family="Arial" font-size="20" text-anchor="middle" fill="white" font-weight="bold">OPEN</text>
  <text x="600" y="210" font-family="Arial" font-size="14" text-anchor="middle" fill="white">Service Unavailable</text>
  
  <!-- Half-Open State -->
  <circle cx="400" cy="300" r="80" fill="#ffc107" opacity="0.8"/>
  <text x="400" y="300" font-family="Arial" font-size="20" text-anchor="middle" fill="#343a40" font-weight="bold">HALF-OPEN</text>
  <text x="400" y="330" font-family="Arial" font-size="14" text-anchor="middle" fill="#343a40">Testing Recovery</text>
  
  <!-- Arrows -->
  <!-- Closed to Open -->
  <path d="M 280 180 L 520 180" stroke="#343a40" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <text x="400" y="165" font-family="Arial" font-size="12" text-anchor="middle">Threshold of failures reached</text>
  
  <!-- Open to Half-Open -->
  <path d="M 600 260 C 600 300 500 300 480 300" stroke="#343a40" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <text x="540" y="330" font-family="Arial" font-size="12" text-anchor="middle">Timeout elapsed</text>
  
  <!-- Half-Open to Open -->
  <path d="M 400 220 C 400 150 500 150 520 180" stroke="#343a40" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <text x="400" y="130" font-family="Arial" font-size="12" text-anchor="middle">Test request fails</text>
  
  <!-- Half-Open to Closed -->
  <path d="M 320 300 C 300 300 200 300 200 260" stroke="#343a40" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <text x="260" y="330" font-family="Arial" font-size="12" text-anchor="middle">Test request succeeds</text>
  
  <!-- Arrow Marker -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#343a40"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="50" y="50" width="20" height="20" fill="#28a745" opacity="0.8"/>
  <text x="80" y="65" font-family="Arial" font-size="14" text-anchor="start">Calls allowed to service</text>
  
  <rect x="50" y="80" width="20" height="20" fill="#dc3545" opacity="0.8"/>
  <text x="80" y="95" font-family="Arial" font-size="14" text-anchor="start">Calls blocked (use fallback)</text>
  
  <rect x="50" y="110" width="20" height="20" fill="#ffc107" opacity="0.8"/>
  <text x="80" y="125" font-family="Arial" font-size="14" text-anchor="start">Limited test calls allowed</text>
</svg>